{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///Users/dhanushka/Desktop/survey/src/actions/categories.ts"],"sourcesContent":["'use server';\n\nimport { revalidatePath } from 'next/cache';\nimport { supabaseAdmin } from '@/lib/supabase/admin';\nimport type { CategoryFormData } from '@/lib/types';\n\nexport async function getCategories(surveyId: string) {\n  try {\n    const { data, error } = await supabaseAdmin\n      .from('categories')\n      .select('*')\n      .eq('survey_id', surveyId)\n      .order('order_index', { ascending: true });\n\n    if (error) throw error;\n\n    return { success: true, data };\n  } catch (error) {\n    console.error('Get categories error:', error);\n    return { success: false, error: 'Failed to fetch categories' };\n  }\n}\n\nexport async function createCategory(formData: CategoryFormData) {\n  try {\n    const { data, error } = await supabaseAdmin\n      .from('categories')\n      .insert([\n        {\n          survey_id: formData.survey_id,\n          name: formData.name,\n          order_index: formData.order_index,\n        },\n      ])\n      .select()\n      .single();\n\n    if (error) throw error;\n\n    revalidatePath(`/[admin]/surveys/${formData.survey_id}`);\n    return { success: true, data };\n  } catch (error) {\n    console.error('Create category error:', error);\n    return { success: false, error: 'Failed to create category' };\n  }\n}\n\nexport async function updateCategory(id: string, formData: Partial<CategoryFormData>) {\n  try {\n    const updateData: any = {};\n    \n    if (formData.name !== undefined) updateData.name = formData.name;\n    if (formData.order_index !== undefined) updateData.order_index = formData.order_index;\n\n    const { data, error } = await supabaseAdmin\n      .from('categories')\n      .update(updateData)\n      .eq('id', id)\n      .select()\n      .single();\n\n    if (error) throw error;\n\n    revalidatePath(`/[admin]/surveys`);\n    return { success: true, data };\n  } catch (error) {\n    console.error('Update category error:', error);\n    return { success: false, error: 'Failed to update category' };\n  }\n}\n\nexport async function deleteCategory(id: string, surveyId: string) {\n  try {\n    const { error } = await supabaseAdmin\n      .from('categories')\n      .delete()\n      .eq('id', id);\n\n    if (error) throw error;\n\n    revalidatePath(`/[admin]/surveys/${surveyId}`);\n    return { success: true };\n  } catch (error) {\n    console.error('Delete category error:', error);\n    return { success: false, error: 'Failed to delete category' };\n  }\n}\n\nexport async function reorderCategories(\n  surveyId: string,\n  categories: { id: string; order_index: number }[]\n) {\n  try {\n    // Update all categories with new order\n    const updates = categories.map((cat) =>\n      supabaseAdmin\n        .from('categories')\n        .update({ order_index: cat.order_index })\n        .eq('id', cat.id)\n    );\n\n    await Promise.all(updates);\n\n    revalidatePath(`/[admin]/surveys/${surveyId}`);\n    return { success: true };\n  } catch (error) {\n    console.error('Reorder categories error:', error);\n    return { success: false, error: 'Failed to reorder categories' };\n  }\n}\n"],"names":[],"mappings":";;;;;;;MAuBsB,wBAAA,WAAA,GAAA,IAAA,+OAAA,EAAA,8CAAA,oOAAA,EAAA,KAAA,GAAA,0OAAA,EAAA,kDAAA"}},
    {"offset": {"line": 42, "column": 0}, "map": {"version":3,"sources":["file:///Users/dhanushka/Desktop/survey/src/actions/categories.ts"],"sourcesContent":["'use server';\n\nimport { revalidatePath } from 'next/cache';\nimport { supabaseAdmin } from '@/lib/supabase/admin';\nimport type { CategoryFormData } from '@/lib/types';\n\nexport async function getCategories(surveyId: string) {\n  try {\n    const { data, error } = await supabaseAdmin\n      .from('categories')\n      .select('*')\n      .eq('survey_id', surveyId)\n      .order('order_index', { ascending: true });\n\n    if (error) throw error;\n\n    return { success: true, data };\n  } catch (error) {\n    console.error('Get categories error:', error);\n    return { success: false, error: 'Failed to fetch categories' };\n  }\n}\n\nexport async function createCategory(formData: CategoryFormData) {\n  try {\n    const { data, error } = await supabaseAdmin\n      .from('categories')\n      .insert([\n        {\n          survey_id: formData.survey_id,\n          name: formData.name,\n          order_index: formData.order_index,\n        },\n      ])\n      .select()\n      .single();\n\n    if (error) throw error;\n\n    revalidatePath(`/[admin]/surveys/${formData.survey_id}`);\n    return { success: true, data };\n  } catch (error) {\n    console.error('Create category error:', error);\n    return { success: false, error: 'Failed to create category' };\n  }\n}\n\nexport async function updateCategory(id: string, formData: Partial<CategoryFormData>) {\n  try {\n    const updateData: any = {};\n    \n    if (formData.name !== undefined) updateData.name = formData.name;\n    if (formData.order_index !== undefined) updateData.order_index = formData.order_index;\n\n    const { data, error } = await supabaseAdmin\n      .from('categories')\n      .update(updateData)\n      .eq('id', id)\n      .select()\n      .single();\n\n    if (error) throw error;\n\n    revalidatePath(`/[admin]/surveys`);\n    return { success: true, data };\n  } catch (error) {\n    console.error('Update category error:', error);\n    return { success: false, error: 'Failed to update category' };\n  }\n}\n\nexport async function deleteCategory(id: string, surveyId: string) {\n  try {\n    const { error } = await supabaseAdmin\n      .from('categories')\n      .delete()\n      .eq('id', id);\n\n    if (error) throw error;\n\n    revalidatePath(`/[admin]/surveys/${surveyId}`);\n    return { success: true };\n  } catch (error) {\n    console.error('Delete category error:', error);\n    return { success: false, error: 'Failed to delete category' };\n  }\n}\n\nexport async function reorderCategories(\n  surveyId: string,\n  categories: { id: string; order_index: number }[]\n) {\n  try {\n    // Update all categories with new order\n    const updates = categories.map((cat) =>\n      supabaseAdmin\n        .from('categories')\n        .update({ order_index: cat.order_index })\n        .eq('id', cat.id)\n    );\n\n    await Promise.all(updates);\n\n    revalidatePath(`/[admin]/surveys/${surveyId}`);\n    return { success: true };\n  } catch (error) {\n    console.error('Reorder categories error:', error);\n    return { success: false, error: 'Failed to reorder categories' };\n  }\n}\n"],"names":[],"mappings":";;;;;;;MA+CsB,wBAAA,WAAA,GAAA,IAAA,+OAAA,EAAA,8CAAA,oOAAA,EAAA,KAAA,GAAA,0OAAA,EAAA,kDAAA"}},
    {"offset": {"line": 56, "column": 0}, "map": {"version":3,"sources":["file:///Users/dhanushka/Desktop/survey/src/actions/categories.ts"],"sourcesContent":["'use server';\n\nimport { revalidatePath } from 'next/cache';\nimport { supabaseAdmin } from '@/lib/supabase/admin';\nimport type { CategoryFormData } from '@/lib/types';\n\nexport async function getCategories(surveyId: string) {\n  try {\n    const { data, error } = await supabaseAdmin\n      .from('categories')\n      .select('*')\n      .eq('survey_id', surveyId)\n      .order('order_index', { ascending: true });\n\n    if (error) throw error;\n\n    return { success: true, data };\n  } catch (error) {\n    console.error('Get categories error:', error);\n    return { success: false, error: 'Failed to fetch categories' };\n  }\n}\n\nexport async function createCategory(formData: CategoryFormData) {\n  try {\n    const { data, error } = await supabaseAdmin\n      .from('categories')\n      .insert([\n        {\n          survey_id: formData.survey_id,\n          name: formData.name,\n          order_index: formData.order_index,\n        },\n      ])\n      .select()\n      .single();\n\n    if (error) throw error;\n\n    revalidatePath(`/[admin]/surveys/${formData.survey_id}`);\n    return { success: true, data };\n  } catch (error) {\n    console.error('Create category error:', error);\n    return { success: false, error: 'Failed to create category' };\n  }\n}\n\nexport async function updateCategory(id: string, formData: Partial<CategoryFormData>) {\n  try {\n    const updateData: any = {};\n    \n    if (formData.name !== undefined) updateData.name = formData.name;\n    if (formData.order_index !== undefined) updateData.order_index = formData.order_index;\n\n    const { data, error } = await supabaseAdmin\n      .from('categories')\n      .update(updateData)\n      .eq('id', id)\n      .select()\n      .single();\n\n    if (error) throw error;\n\n    revalidatePath(`/[admin]/surveys`);\n    return { success: true, data };\n  } catch (error) {\n    console.error('Update category error:', error);\n    return { success: false, error: 'Failed to update category' };\n  }\n}\n\nexport async function deleteCategory(id: string, surveyId: string) {\n  try {\n    const { error } = await supabaseAdmin\n      .from('categories')\n      .delete()\n      .eq('id', id);\n\n    if (error) throw error;\n\n    revalidatePath(`/[admin]/surveys/${surveyId}`);\n    return { success: true };\n  } catch (error) {\n    console.error('Delete category error:', error);\n    return { success: false, error: 'Failed to delete category' };\n  }\n}\n\nexport async function reorderCategories(\n  surveyId: string,\n  categories: { id: string; order_index: number }[]\n) {\n  try {\n    // Update all categories with new order\n    const updates = categories.map((cat) =>\n      supabaseAdmin\n        .from('categories')\n        .update({ order_index: cat.order_index })\n        .eq('id', cat.id)\n    );\n\n    await Promise.all(updates);\n\n    revalidatePath(`/[admin]/surveys/${surveyId}`);\n    return { success: true };\n  } catch (error) {\n    console.error('Reorder categories error:', error);\n    return { success: false, error: 'Failed to reorder categories' };\n  }\n}\n"],"names":[],"mappings":";;;;;;;MAuEsB,wBAAA,WAAA,GAAA,IAAA,+OAAA,EAAA,8CAAA,oOAAA,EAAA,KAAA,GAAA,0OAAA,EAAA,kDAAA"}},
    {"offset": {"line": 70, "column": 0}, "map": {"version":3,"sources":["file:///Users/dhanushka/Desktop/survey/src/lib/utils.ts"],"sourcesContent":["import { type ClassValue, clsx } from 'clsx';\nimport { twMerge } from 'tailwind-merge';\n\n// Tailwind class name merger\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs));\n}\n\n// Format date for display\nexport function formatDate(date: string | Date): string {\n  const d = typeof date === 'string' ? new Date(date) : date;\n  return d.toLocaleDateString('en-US', {\n    year: 'numeric',\n    month: 'short',\n    day: 'numeric'\n  });\n}\n\n// Format datetime for display\nexport function formatDateTime(date: string | Date): string {\n  const d = typeof date === 'string' ? new Date(date) : date;\n  return d.toLocaleString('en-US', {\n    year: 'numeric',\n    month: 'short',\n    day: 'numeric',\n    hour: '2-digit',\n    minute: '2-digit'\n  });\n}\n\n// Check if survey is currently active\nexport function isSurveyActive(\n  isActive: boolean,\n  startDate: string | null,\n  endDate: string | null\n): boolean {\n  if (!isActive) return false;\n\n  const now = new Date();\n\n  if (startDate && new Date(startDate) > now) {\n    return false;\n  }\n\n  if (endDate && new Date(endDate) < now) {\n    return false;\n  }\n\n  return true;\n}\n\n// Format time spent in seconds to readable format\nexport function formatTimeSpent(seconds: number): string {\n  if (seconds < 60) {\n    return `${seconds}s`;\n  }\n  const minutes = Math.floor(seconds / 60);\n  const remainingSeconds = seconds % 60;\n  return `${minutes}m ${remainingSeconds}s`;\n}\n\n// Generate session ID\nexport function generateSessionId(): string {\n  return `session_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n}\n\n// Get or create session ID from localStorage\nexport function getOrCreateSessionId(forceNew: boolean = false): string {\n  if (typeof window === 'undefined') return '';\n\n  const storageKey = 'survey_session_id';\n  \n  // If forceNew is true, always generate a new session ID\n  if (forceNew) {\n    const sessionId = generateSessionId();\n    localStorage.setItem(storageKey, sessionId);\n    return sessionId;\n  }\n\n  let sessionId = localStorage.getItem(storageKey);\n\n  if (!sessionId) {\n    sessionId = generateSessionId();\n    localStorage.setItem(storageKey, sessionId);\n  }\n\n  return sessionId;\n}\n\n// End current session (clear session ID)\nexport function endSession(): void {\n  if (typeof window === 'undefined') return;\n  localStorage.removeItem('survey_session_id');\n}\n\n// Generate a new session ID and replace the old one\nexport function renewSessionId(): string {\n  endSession(); // First end the old session\n  return getOrCreateSessionId(true);\n}\n\n// Check if user has completed a survey\nexport function hasCompletedSurvey(surveyId: string): boolean {\n  if (typeof window === 'undefined') return false;\n\n  const completedSurveys = localStorage.getItem('completed_surveys');\n  if (!completedSurveys) return false;\n\n  const completed = JSON.parse(completedSurveys);\n  return completed.includes(surveyId);\n}\n\n// Mark survey as completed\nexport function markSurveyCompleted(surveyId: string): void {\n  if (typeof window === 'undefined') return;\n\n  const completedSurveys = localStorage.getItem('completed_surveys');\n  const completed = completedSurveys ? JSON.parse(completedSurveys) : [];\n\n  if (!completed.includes(surveyId)) {\n    completed.push(surveyId);\n    localStorage.setItem('completed_surveys', JSON.stringify(completed));\n  }\n}\n\n// Clear all completed surveys (useful for testing or allowing retakes)\nexport function clearCompletedSurveys(): void {\n  if (typeof window === 'undefined') return;\n  localStorage.removeItem('completed_surveys');\n}\n\n// Clear specific survey completion (allow retake)\nexport function clearSurveyCompletion(surveyId: string): void {\n  if (typeof window === 'undefined') return;\n\n  const completedSurveys = localStorage.getItem('completed_surveys');\n  if (!completedSurveys) return;\n\n  const completed = JSON.parse(completedSurveys);\n  const filtered = completed.filter((id: string) => id !== surveyId);\n  localStorage.setItem('completed_surveys', JSON.stringify(filtered));\n}\n\n// Calculate percentage\nexport function calculatePercentage(value: number, total: number): number {\n  if (total === 0) return 0;\n  return Math.round((value / total) * 100);\n}\n\n// Validate file type for media upload\nexport function isValidMediaFile(file: File): boolean {\n  const validTypes = [\n    'image/jpeg',\n    'image/jpg',\n    'image/png',\n    'image/gif',\n    'image/webp',\n    'video/mp4',\n    'video/webm',\n    'video/quicktime'\n  ];\n  return validTypes.includes(file.type);\n}\n\n// Format file size\nexport function formatFileSize(bytes: number): string {\n  if (bytes === 0) return '0 Bytes';\n\n  const k = 1024;\n  const sizes = ['Bytes', 'KB', 'MB', 'GB'];\n  const i = Math.floor(Math.log(bytes) / Math.log(k));\n\n  return Math.round(bytes / Math.pow(k, i) * 100) / 100 + ' ' + sizes[i];\n}\n\n// Get admin path from env\nexport function getAdminPath(): string {\n  return process.env.ADMIN_SECRET_PATH || 'admin-x9QpK7';\n}\n\n// Validate admin path in URL\nexport function isAdminPath(pathname: string): boolean {\n  const adminPath = getAdminPath();\n  return pathname.startsWith(`/${adminPath}`);\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;;;AAGO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,IAAA,sKAAO,EAAC,IAAA,6IAAI,EAAC;AACtB;AAGO,SAAS,WAAW,IAAmB;IAC5C,MAAM,IAAI,OAAO,SAAS,WAAW,IAAI,KAAK,QAAQ;IACtD,OAAO,EAAE,kBAAkB,CAAC,SAAS;QACnC,MAAM;QACN,OAAO;QACP,KAAK;IACP;AACF;AAGO,SAAS,eAAe,IAAmB;IAChD,MAAM,IAAI,OAAO,SAAS,WAAW,IAAI,KAAK,QAAQ;IACtD,OAAO,EAAE,cAAc,CAAC,SAAS;QAC/B,MAAM;QACN,OAAO;QACP,KAAK;QACL,MAAM;QACN,QAAQ;IACV;AACF;AAGO,SAAS,eACd,QAAiB,EACjB,SAAwB,EACxB,OAAsB;IAEtB,IAAI,CAAC,UAAU,OAAO;IAEtB,MAAM,MAAM,IAAI;IAEhB,IAAI,aAAa,IAAI,KAAK,aAAa,KAAK;QAC1C,OAAO;IACT;IAEA,IAAI,WAAW,IAAI,KAAK,WAAW,KAAK;QACtC,OAAO;IACT;IAEA,OAAO;AACT;AAGO,SAAS,gBAAgB,OAAe;IAC7C,IAAI,UAAU,IAAI;QAChB,OAAO,GAAG,QAAQ,CAAC,CAAC;IACtB;IACA,MAAM,UAAU,KAAK,KAAK,CAAC,UAAU;IACrC,MAAM,mBAAmB,UAAU;IACnC,OAAO,GAAG,QAAQ,EAAE,EAAE,iBAAiB,CAAC,CAAC;AAC3C;AAGO,SAAS;IACd,OAAO,CAAC,QAAQ,EAAE,KAAK,GAAG,GAAG,CAAC,EAAE,KAAK,MAAM,GAAG,QAAQ,CAAC,IAAI,MAAM,CAAC,GAAG,IAAI;AAC3E;AAGO,SAAS,qBAAqB,WAAoB,KAAK;IAC5D,wCAAmC,OAAO;;;IAE1C,MAAM;IASN,IAAI;AAQN;AAGO,SAAS;IACd,wCAAmC;;;AAErC;AAGO,SAAS;IACd,cAAc,4BAA4B;IAC1C,OAAO,qBAAqB;AAC9B;AAGO,SAAS,mBAAmB,QAAgB;IACjD,wCAAmC,OAAO;;;IAE1C,MAAM;IAGN,MAAM;AAER;AAGO,SAAS,oBAAoB,QAAgB;IAClD,wCAAmC;;;IAEnC,MAAM;IACN,MAAM;AAMR;AAGO,SAAS;IACd,wCAAmC;;;AAErC;AAGO,SAAS,sBAAsB,QAAgB;IACpD,wCAAmC;;;IAEnC,MAAM;IAGN,MAAM;IACN,MAAM;AAER;AAGO,SAAS,oBAAoB,KAAa,EAAE,KAAa;IAC9D,IAAI,UAAU,GAAG,OAAO;IACxB,OAAO,KAAK,KAAK,CAAC,AAAC,QAAQ,QAAS;AACtC;AAGO,SAAS,iBAAiB,IAAU;IACzC,MAAM,aAAa;QACjB;QACA;QACA;QACA;QACA;QACA;QACA;QACA;KACD;IACD,OAAO,WAAW,QAAQ,CAAC,KAAK,IAAI;AACtC;AAGO,SAAS,eAAe,KAAa;IAC1C,IAAI,UAAU,GAAG,OAAO;IAExB,MAAM,IAAI;IACV,MAAM,QAAQ;QAAC;QAAS;QAAM;QAAM;KAAK;IACzC,MAAM,IAAI,KAAK,KAAK,CAAC,KAAK,GAAG,CAAC,SAAS,KAAK,GAAG,CAAC;IAEhD,OAAO,KAAK,KAAK,CAAC,QAAQ,KAAK,GAAG,CAAC,GAAG,KAAK,OAAO,MAAM,MAAM,KAAK,CAAC,EAAE;AACxE;AAGO,SAAS;IACd,OAAO,QAAQ,GAAG,CAAC,iBAAiB,IAAI;AAC1C;AAGO,SAAS,YAAY,QAAgB;IAC1C,MAAM,YAAY;IAClB,OAAO,SAAS,UAAU,CAAC,CAAC,CAAC,EAAE,WAAW;AAC5C"}},
    {"offset": {"line": 238, "column": 0}, "map": {"version":3,"sources":["file:///Users/dhanushka/Desktop/survey/src/components/ui/Button.tsx"],"sourcesContent":["import { ButtonHTMLAttributes, forwardRef } from 'react';\nimport { cn } from '@/lib/utils';\n\ninterface ButtonProps extends ButtonHTMLAttributes<HTMLButtonElement> {\n  variant?: 'primary' | 'secondary' | 'ghost' | 'danger';\n  size?: 'sm' | 'md' | 'lg';\n}\n\nconst Button = forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant = 'primary', size = 'md', ...props }, ref) => {\n    return (\n      <button\n        ref={ref}\n        className={cn(\n          'inline-flex items-center justify-center rounded-lg font-medium transition-colors',\n          'focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary',\n          'disabled:pointer-events-none disabled:opacity-50',\n          {\n            'bg-primary text-white hover:bg-primary-hover active:scale-[0.98]':\n              variant === 'primary',\n            'bg-muted text-foreground hover:bg-border':\n              variant === 'secondary',\n            'hover:bg-muted': variant === 'ghost',\n            'bg-red-600 text-white hover:bg-red-700': variant === 'danger',\n          },\n          {\n            'h-9 px-3 text-sm': size === 'sm',\n            'h-11 px-6 text-base': size === 'md',\n            'h-14 px-8 text-lg': size === 'lg',\n          },\n          className\n        )}\n        {...props}\n      />\n    );\n  }\n);\n\nButton.displayName = 'Button';\n\nexport { Button };\n"],"names":[],"mappings":";;;;;AAAA;AACA;;;;AAOA,MAAM,uBAAS,IAAA,mNAAU,EACvB,CAAC,EAAE,SAAS,EAAE,UAAU,SAAS,EAAE,OAAO,IAAI,EAAE,GAAG,OAAO,EAAE;IAC1D,qBACE,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,yHAAE,EACX,oFACA,8EACA,oDACA;YACE,oEACE,YAAY;YACd,4CACE,YAAY;YACd,kBAAkB,YAAY;YAC9B,0CAA0C,YAAY;QACxD,GACA;YACE,oBAAoB,SAAS;YAC7B,uBAAuB,SAAS;YAChC,qBAAqB,SAAS;QAChC,GACA;QAED,GAAG,KAAK;;;;;;AAGf;AAGF,OAAO,WAAW,GAAG"}},
    {"offset": {"line": 274, "column": 0}, "map": {"version":3,"sources":["file:///Users/dhanushka/Desktop/survey/src/components/ui/Input.tsx"],"sourcesContent":["import { InputHTMLAttributes, forwardRef } from 'react';\nimport { cn } from '@/lib/utils';\n\ninterface InputProps extends InputHTMLAttributes<HTMLInputElement> {\n  label?: string;\n  error?: string;\n}\n\nconst Input = forwardRef<HTMLInputElement, InputProps>(\n  ({ className, label, error, ...props }, ref) => {\n    return (\n      <div className=\"w-full\">\n        {label && (\n          <label className=\"block text-sm font-medium text-foreground mb-2\">\n            {label}\n          </label>\n        )}\n        <input\n          ref={ref}\n          className={cn(\n            'flex h-11 w-full rounded-lg border border-border bg-background px-4 py-2',\n            'text-base text-foreground placeholder:text-muted-foreground',\n            'focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary',\n            'disabled:cursor-not-allowed disabled:opacity-50',\n            error && 'border-red-500 focus-visible:ring-red-500',\n            className\n          )}\n          {...props}\n        />\n        {error && <p className=\"mt-1 text-sm text-red-600\">{error}</p>}\n      </div>\n    );\n  }\n);\n\nInput.displayName = 'Input';\n\nexport { Input };\n"],"names":[],"mappings":";;;;;AAAA;AACA;;;;AAOA,MAAM,sBAAQ,IAAA,mNAAU,EACtB,CAAC,EAAE,SAAS,EAAE,KAAK,EAAE,KAAK,EAAE,GAAG,OAAO,EAAE;IACtC,qBACE,8OAAC;QAAI,WAAU;;YACZ,uBACC,8OAAC;gBAAM,WAAU;0BACd;;;;;;0BAGL,8OAAC;gBACC,KAAK;gBACL,WAAW,IAAA,yHAAE,EACX,4EACA,+DACA,8EACA,mDACA,SAAS,6CACT;gBAED,GAAG,KAAK;;;;;;YAEV,uBAAS,8OAAC;gBAAE,WAAU;0BAA6B;;;;;;;;;;;;AAG1D;AAGF,MAAM,WAAW,GAAG"}},
    {"offset": {"line": 326, "column": 0}, "map": {"version":3,"sources":["file:///Users/dhanushka/Desktop/survey/src/components/admin/CategoryManager.tsx"],"sourcesContent":["'use client';\n\nimport { useState } from 'react';\nimport { useRouter } from 'next/navigation';\nimport { createCategory, updateCategory, deleteCategory } from '@/actions/categories';\nimport { Button } from '@/components/ui/Button';\nimport { Input } from '@/components/ui/Input';\nimport type { Category } from '@/lib/types';\n\ninterface CategoryManagerProps {\n  surveyId: string;\n  categories: Category[];\n}\n\nexport function CategoryManager({ surveyId, categories: initialCategories }: CategoryManagerProps) {\n  const router = useRouter();\n  const [categories, setCategories] = useState(initialCategories);\n  const [isAdding, setIsAdding] = useState(false);\n  const [newCategoryName, setNewCategoryName] = useState('');\n  const [editingId, setEditingId] = useState<string | null>(null);\n  const [editingName, setEditingName] = useState('');\n  const [loading, setLoading] = useState<string | null>(null);\n\n  const handleAdd = async () => {\n    if (!newCategoryName.trim()) return;\n\n    setLoading('add');\n    const result = await createCategory({\n      survey_id: surveyId,\n      name: newCategoryName,\n      order_index: categories.length,\n    });\n    setLoading(null);\n\n    if (result.success) {\n      setNewCategoryName('');\n      setIsAdding(false);\n      router.refresh();\n    } else {\n      alert(result.error);\n    }\n  };\n\n  const handleUpdate = async (id: string) => {\n    if (!editingName.trim()) return;\n\n    setLoading(id);\n    const result = await updateCategory(id, { name: editingName });\n    setLoading(null);\n\n    if (result.success) {\n      setEditingId(null);\n      setEditingName('');\n      router.refresh();\n    } else {\n      alert(result.error);\n    }\n  };\n\n  const handleDelete = async (id: string, name: string) => {\n    if (!confirm(`Are you sure you want to delete \"${name}\"?`)) {\n      return;\n    }\n\n    setLoading(id);\n    const result = await deleteCategory(id, surveyId);\n    setLoading(null);\n\n    if (result.success) {\n      router.refresh();\n    } else {\n      alert(result.error);\n    }\n  };\n\n  const startEdit = (category: Category) => {\n    setEditingId(category.id);\n    setEditingName(category.name);\n  };\n\n  const cancelEdit = () => {\n    setEditingId(null);\n    setEditingName('');\n  };\n\n  return (\n    <div className=\"space-y-4\">\n      {categories.length === 0 && !isAdding && (\n        <p className=\"text-muted-foreground text-center py-8\">\n          No categories yet. Add your first category below.\n        </p>\n      )}\n\n      {categories.map((category) => (\n        <div\n          key={category.id}\n          className=\"flex items-center gap-3 p-4 border border-border rounded-lg\"\n        >\n          {editingId === category.id ? (\n            <>\n              <Input\n                value={editingName}\n                onChange={(e) => setEditingName(e.target.value)}\n                placeholder=\"Category name\"\n                disabled={loading === category.id}\n                className=\"flex-1\"\n              />\n              <Button\n                size=\"sm\"\n                onClick={() => handleUpdate(category.id)}\n                disabled={loading === category.id || !editingName.trim()}\n              >\n                Save\n              </Button>\n              <Button\n                size=\"sm\"\n                variant=\"secondary\"\n                onClick={cancelEdit}\n                disabled={loading === category.id}\n              >\n                Cancel\n              </Button>\n            </>\n          ) : (\n            <>\n              <span className=\"flex-1 font-medium\">{category.name}</span>\n              <Button\n                size=\"sm\"\n                variant=\"secondary\"\n                onClick={() => startEdit(category)}\n                disabled={loading === category.id}\n              >\n                Edit\n              </Button>\n              <Button\n                size=\"sm\"\n                variant=\"danger\"\n                onClick={() => handleDelete(category.id, category.name)}\n                disabled={loading === category.id}\n              >\n                Delete\n              </Button>\n            </>\n          )}\n        </div>\n      ))}\n\n      {isAdding ? (\n        <div className=\"flex items-center gap-3 p-4 border border-border rounded-lg bg-muted/50\">\n          <Input\n            value={newCategoryName}\n            onChange={(e) => setNewCategoryName(e.target.value)}\n            placeholder=\"Enter category name\"\n            disabled={loading === 'add'}\n            className=\"flex-1\"\n            autoFocus\n          />\n          <Button\n            size=\"sm\"\n            onClick={handleAdd}\n            disabled={loading === 'add' || !newCategoryName.trim()}\n          >\n            Add\n          </Button>\n          <Button\n            size=\"sm\"\n            variant=\"secondary\"\n            onClick={() => {\n              setIsAdding(false);\n              setNewCategoryName('');\n            }}\n            disabled={loading === 'add'}\n          >\n            Cancel\n          </Button>\n        </div>\n      ) : (\n        <Button onClick={() => setIsAdding(true)}>\n          Add Category\n        </Button>\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}