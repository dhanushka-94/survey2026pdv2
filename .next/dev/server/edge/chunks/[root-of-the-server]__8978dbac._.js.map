{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 16, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/src/middleware.ts"],"sourcesContent":["import { NextResponse } from 'next/server';\nimport type { NextRequest } from 'next/server';\n\nexport function middleware(request: NextRequest) {\n  const { pathname } = request.nextUrl;\n  \n  // Get admin path from env\n  const adminPath = process.env.ADMIN_SECRET_PATH || 'admin-x9QpK7';\n  \n  // Check if this is an admin route\n  if (pathname.startsWith(`/${adminPath}`)) {\n    // Skip login page\n    if (pathname === `/${adminPath}`) {\n      return NextResponse.next();\n    }\n    \n    // Check for admin session cookie\n    const adminSession = request.cookies.get('admin_session');\n    \n    if (!adminSession) {\n      // Redirect to login if not authenticated\n      return NextResponse.redirect(new URL(`/${adminPath}`, request.url));\n    }\n    \n    // Verify session is still valid\n    try {\n      const sessionData = JSON.parse(adminSession.value);\n      const now = Date.now();\n      \n      if (sessionData.expiresAt < now) {\n        // Session expired, redirect to login\n        const response = NextResponse.redirect(new URL(`/${adminPath}`, request.url));\n        response.cookies.delete('admin_session');\n        return response;\n      }\n    } catch (error) {\n      // Invalid session data, redirect to login\n      const response = NextResponse.redirect(new URL(`/${adminPath}`, request.url));\n      response.cookies.delete('admin_session');\n      return response;\n    }\n  }\n  \n  return NextResponse.next();\n}\n\nexport const config = {\n  matcher: [\n    /*\n     * Match all request paths except for the ones starting with:\n     * - api (API routes)\n     * - _next/static (static files)\n     * - _next/image (image optimization files)\n     * - favicon.ico (favicon file)\n     */\n    '/((?!api|_next/static|_next/image|favicon.ico).*)',\n  ],\n};\n"],"names":[],"mappings":";;;;;;AAAA;AAAA;;AAGO,SAAS,WAAW,OAAoB;IAC7C,MAAM,EAAE,QAAQ,EAAE,GAAG,QAAQ,OAAO;IAEpC,0BAA0B;IAC1B,MAAM,YAAY,QAAQ,GAAG,CAAC,iBAAiB,IAAI;IAEnD,kCAAkC;IAClC,IAAI,SAAS,UAAU,CAAC,CAAC,CAAC,EAAE,WAAW,GAAG;QACxC,kBAAkB;QAClB,IAAI,aAAa,CAAC,CAAC,EAAE,WAAW,EAAE;YAChC,OAAO,gMAAY,CAAC,IAAI;QAC1B;QAEA,iCAAiC;QACjC,MAAM,eAAe,QAAQ,OAAO,CAAC,GAAG,CAAC;QAEzC,IAAI,CAAC,cAAc;YACjB,yCAAyC;YACzC,OAAO,gMAAY,CAAC,QAAQ,CAAC,IAAI,IAAI,CAAC,CAAC,EAAE,WAAW,EAAE,QAAQ,GAAG;QACnE;QAEA,gCAAgC;QAChC,IAAI;YACF,MAAM,cAAc,KAAK,KAAK,CAAC,aAAa,KAAK;YACjD,MAAM,MAAM,KAAK,GAAG;YAEpB,IAAI,YAAY,SAAS,GAAG,KAAK;gBAC/B,qCAAqC;gBACrC,MAAM,WAAW,gMAAY,CAAC,QAAQ,CAAC,IAAI,IAAI,CAAC,CAAC,EAAE,WAAW,EAAE,QAAQ,GAAG;gBAC3E,SAAS,OAAO,CAAC,MAAM,CAAC;gBACxB,OAAO;YACT;QACF,EAAE,OAAO,OAAO;YACd,0CAA0C;YAC1C,MAAM,WAAW,gMAAY,CAAC,QAAQ,CAAC,IAAI,IAAI,CAAC,CAAC,EAAE,WAAW,EAAE,QAAQ,GAAG;YAC3E,SAAS,OAAO,CAAC,MAAM,CAAC;YACxB,OAAO;QACT;IACF;IAEA,OAAO,gMAAY,CAAC,IAAI;AAC1B;AAEO,MAAM,SAAS;IACpB,SAAS;QACP;;;;;;KAMC,GACD;KACD;AACH"}}]
}